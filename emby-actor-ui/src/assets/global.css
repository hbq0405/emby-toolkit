/* global.css */
/* ★★★ 1. 在最顶部添加默认值，防止报错 ★★★ */
:root {
  --card-scale: 1;
}
.n-card.dashboard-card {
  background: var(--card-bg-color) !important;
  border: 1px solid var(--card-border-color) !important;
  box-shadow: 0 4px 12px var(--card-shadow-color), 0 0 20px -5px var(--accent-glow-color) !important;
  color: var(--text-color) !important;
  border-radius: 12px !important;
  backdrop-filter: blur(10px) !important;
  -webkit-backdrop-filter: blur(10px) !important;
  transition: all 0.3s ease-in-out !important;
  height: 100%;
  display: flex !important;
  flex-direction: column !important;
  opacity: 0;
  font-size: calc(14px * var(--card-scale, 1));
  /* 使用 zoom 可以让卡片变大时自动撑开布局，不会重叠 */
  /* 注意：transform 会和下面的 animation 冲突，所以这里推荐用 zoom */
  transform: translateY(20px); 
  animation: card-fade-in 0.5s ease-out forwards;
}

/* 2. 优化系列卡片 (横向布局) 的样式，防止被压扁 */
.n-card.dashboard-card.series-card > .n-card__content {
  flex-direction: row !important;
  justify-content: flex-start !important;
  padding: 12px !important;
  gap: 16px !important; /* 增加一点间距 */
  overflow: hidden; /* 防止内容溢出 */
}

/* 3. 锁定海报图片的尺寸，防止它被拉伸 */
.card-poster-container {
  flex-shrink: 0; /* 禁止海报缩小 */
  /* 让海报大小也随比例缩放 */
  width: calc(120px * var(--card-scale, 1)) !important; 
  height: calc(180px * var(--card-scale, 1)) !important;
  overflow: hidden;
  border-radius: 8px;
}

.dashboard-card > .n-card__content {
  flex-grow: 1 !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: space-between !important;
}
.n-card.dashboard-card:hover {
  transform: translateY(-5px) !important;
  box-shadow: 0 8px 20px var(--card-shadow-color), 0 0 35px var(--accent-glow-color) !important;
}
.dashboard-card .card-title {
  color: var(--accent-color) !important; /* ★★★ 灵魂归位！★★★ */
  font-weight: 600 !important;
  letter-spacing: 1px;
  text-shadow: 0 0 8px var(--accent-glow-color);
}
.n-card.dashboard-card.series-card {
  flex-direction: row !important;
  height: auto !important;
}
.n-card.dashboard-card.series-card > .n-card__content {
  flex-direction: row !important;
  justify-content: flex-start !important;
  padding: 12px !important;
  gap: 12px !important;
}
.text-effect {
  font-weight: 900;
  font-size: 2rem; /* 根据需求调整字体大小 */
  color: #f0f0f0; /* 主字体颜色 */
  letter-spacing: 0.05em; /* 字母间距 */
  text-transform: uppercase;
  /* 多重阴影模拟立体感和质感 */
  text-shadow:
    1px 1px 0 #222,    /* 黑色偏移阴影 */
    2px 2px 1px #555,  /* 灰色柔和阴影 */
    0 0 5px #fff,     /* 白色光晕 */
    0 0 3px #ccc;    /* 更大范围光晕 */
}
/* ★★★ 为模态框准备的“轻量版”样式 ★★★ */
.modal-card-lite {
  /* 使用我们新定义的、绝对不透明的背景色变量！ */
  background-color: var(--modal-solid-bg-color) !important;

  /* 边框还是用原来的，保持风格统一 */
  border: 1px solid var(--card-border-color) !important;
  
  /* 继承我们自定义的圆角 */
  border-radius: 12px !important;

  /* 给一个简单、不卡顿的阴影，让它有点立体感 */
  box-shadow: 0 6px 16px -8px rgba(0, 0, 0, 0.32) !important;

  /* 确保动画效果被彻底禁用，保证丝滑 */
  animation: none !important;
  transition: none !important;
}

/* 顺便把 hover 效果也干掉，防止意外的性能问题 */
.modal-card-lite:hover {
  transform: none !important;
  box-shadow: 0 6px 16px -8px rgba(0, 0, 0, 0.32) !important;
}
@keyframes card-fade-in { to { opacity: 1; transform: translateY(0); } }
.dashboard-card:nth-child(1) { animation-delay: 0.1s; }
.dashboard-card:nth-child(2) { animation-delay: 0.2s; }
.dashboard-card:nth-child(3) { animation-delay: 0.3s; }
.dashboard-card:nth-child(4) { animation-delay: 0.4s; }
.dashboard-card:nth-child(5) { animation-delay: 0.5s; }

/* =========================================
   极光流光进度条 (Aurora Flow) - 全局样式版
   ========================================= */

/* 1. 定义动画关键帧 (放全局最安全) */
@keyframes aurora-flow {
  0% { background-position: 100% 0; }
  100% { background-position: -100% 0; }
}

/* 2. 针对 processing (进行中) 状态的内部元素进行暴力覆盖 */
/* 注意：这里去掉了 :deep()，因为在 global.css 里不需要它 */
.aurora-progress .n-progress-graph-line-fill.n-progress-graph-line-fill--processing {
  /* 强制背景为流光渐变：主色 -> 亮青 -> 玫红 -> 主色 */
  background: linear-gradient(
    90deg, 
    var(--n-color-primary) 0%, 
    #00d2ff 50%,    
    #ff0099 75%,    
    var(--n-color-primary) 100%
  ) !important;
  
  /* 拉伸背景以支持移动动画 */
  background-size: 200% 100% !important;
  
  /* 执行动画 */
  animation: aurora-flow 2s linear infinite !important;
  
  /* 加上发光阴影 */
  box-shadow: 0 0 6px rgba(0, 210, 255, 0.8) !important;
  
  /* 确保不透明 */
  opacity: 1 !important;
}

/* 3. 隐藏 Naive UI 原本自带的白色波纹动画 */
.aurora-progress .n-progress-graph-line-fill.n-progress-graph-line-fill--processing::after {
  display: none !important;
}

/* 4. 轨道背景加深，增加对比度 */
.aurora-progress .n-progress-graph-line-rail {
  background-color: rgba(0,0,0,0.15) !important;
}
html.dark .aurora-progress .n-progress-graph-line-rail {
  background-color: rgba(255,255,255,0.2) !important;
}